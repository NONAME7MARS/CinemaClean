{% extends "admin/base.html" %}
{% load static %}

{% block title %}–ö—ñ–Ω–æ—Ç–µ–∞—Ç—Ä ¬´–ó–æ—Ä—è–Ω–∏–π¬ª | {{ block.super }}{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/admin_custom.css' %}">
    <style>
        html {
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        #theme-toggle {
            margin-left: 6px;
            padding: 4px 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.5s ease;
        }
        #theme-toggle.rotating {
            transform: rotate(360deg);
        }
    </style>
{% endblock %}

{% block branding %}
    <h1 id="site-name">üé¨ –ö—ñ–Ω–æ—Ç–µ–∞—Ç—Ä ¬´–ó–æ—Ä—è–Ω–∏–π¬ª ‚Äî –ê–¥–º—ñ–Ω–∫–∞</h1>
{% endblock %}

{% block usertools %}
<div id="user-tools">
    <strong>–í—ñ—Ç–∞—î–º–æ, {{ user.username }}</strong>
    <a href="/">–î–∏–≤–∏—Ç–∏—Å—è —Å–∞–π—Ç</a>
    <a href="{% url 'admin:password_change' %}">–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</a>
    <a href="{% url 'admin:logout' %}">–í–∏–π—Ç–∏</a>
    <span id="theme-toggle" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">üåó</span>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById("theme-toggle");
    const html = document.documentElement;
    const body = document.body;

    const applyTheme = (theme) => {
        html.setAttribute("data-theme", theme);
        body.classList.toggle("dark-theme", theme === "dark");
        localStorage.setItem("theme", theme);
    };

    // –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–æ—ó —Ç–µ–º–∏
    const savedTheme = localStorage.getItem("theme") || "light";
    applyTheme(savedTheme);

    // –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—É
    toggle.addEventListener("click", () => {
        const newTheme = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
        toggle.classList.add("rotating");
        applyTheme(newTheme);
        setTimeout(() => toggle.classList.remove("rotating"), 400);
    });
});
</script>
{% endblock %}
